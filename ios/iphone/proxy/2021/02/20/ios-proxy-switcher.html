<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>iOS Proxy Switcher | Jared Beach‚Äôs Dev Blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="iOS Proxy Switcher" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Switching your iOS proxy profile is, unfortunately, very tedious. The manual way to do this is to go to Settings -&gt; Wi-Fi -&gt; click the information icon on your Wi-Fi connection -&gt; Configure Proxy (at the very bottom) -&gt; Manual -&gt; Type everything in. If you need to change any of that, you‚Äôll have to do it all again‚Ä¶" />
<meta property="og:description" content="Switching your iOS proxy profile is, unfortunately, very tedious. The manual way to do this is to go to Settings -&gt; Wi-Fi -&gt; click the information icon on your Wi-Fi connection -&gt; Configure Proxy (at the very bottom) -&gt; Manual -&gt; Type everything in. If you need to change any of that, you‚Äôll have to do it all again‚Ä¶" />
<link rel="canonical" href="https://jmbeach.github.io/blog/blog/ios/iphone/proxy/2021/02/20/ios-proxy-switcher.html" />
<meta property="og:url" content="https://jmbeach.github.io/blog/blog/ios/iphone/proxy/2021/02/20/ios-proxy-switcher.html" />
<meta property="og:site_name" content="Jared Beach‚Äôs Dev Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-20T08:52:16-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="iOS Proxy Switcher" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://jmbeach.github.io/blog/blog/ios/iphone/proxy/2021/02/20/ios-proxy-switcher.html"},"url":"https://jmbeach.github.io/blog/blog/ios/iphone/proxy/2021/02/20/ios-proxy-switcher.html","dateModified":"2021-02-20T08:52:16-06:00","headline":"iOS Proxy Switcher","description":"Switching your iOS proxy profile is, unfortunately, very tedious. The manual way to do this is to go to Settings -&gt; Wi-Fi -&gt; click the information icon on your Wi-Fi connection -&gt; Configure Proxy (at the very bottom) -&gt; Manual -&gt; Type everything in. If you need to change any of that, you‚Äôll have to do it all again‚Ä¶","datePublished":"2021-02-20T08:52:16-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://jmbeach.github.io/blog/blog/feed.xml" title="Jared Beach's Dev Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Jared Beach&#39;s Dev Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">iOS Proxy Switcher</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-02-20T08:52:16-06:00" itemprop="datePublished">Feb 20, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Switching your iOS proxy profile is, unfortunately, very tedious. The manual way to do this is to go to Settings -&gt; Wi-Fi -&gt; click the information icon on your Wi-Fi connection -&gt; Configure Proxy (at the very bottom) -&gt; Manual -&gt; Type everything in. If you need to change any of that, you‚Äôll have to do it all again‚Ä¶</p>

<p>The solution I‚Äôm about to offer you is far from perfect, but it‚Äôs much more automated and requires much less brain power than the manual way.</p>

<p>To do this, we are going to use <a href="https://en.wikipedia.org/wiki/Shortcuts_(app)">Shortcuts</a> to install and remove <a href="https://developer.apple.com/documentation/appstoreconnectapi/profiles">profiles</a> that will configure our proxy settings in a stream-lined way. This approach is inspired by <a href="https://apple.stackexchange.com/a/223926/57640">an AskDifferent answer by jcaron</a>.</p>

<p>Before I lose you, here‚Äôs what we‚Äôre trying to acheive:</p>

<video src="https://jareds-dev-blog.s3.amazonaws.com/ios-profile-switcher.MP4" controls="" autoplay="" width="300px"></video>

<h1 id="enable-supervised-mode">Enable Supervised Mode</h1>

<p>Unfortunately, for this to work, your device has to be <a href="https://support.apple.com/guide/deployment-reference-ios/enabling-device-supervision-ior7ba06c270/web">supervised</a> (WARNING: which requires factory resetting your phone üò•). Also, this requires access to a mac. What it doesn‚Äôt require is Jailbreaking!</p>

<p>Before you begin, make sure to <a href="https://support.apple.com/en-us/HT211149">diable Find My Phone</a> or this will fail.</p>

<p>I won‚Äôt cover this portion in detail because it‚Äôs already well-documented elsewhere. See <a href="https://support.jamfnow.com/s/article/207704656-Supervising-iOS-Devices-with-Apple-Configurator-2-5-or-Later">this article, for example</a>. But I will show some screenshots of enabling this.</p>

<p>In <a href="https://support.apple.com/apple-configurator">Apple Configurator 2</a>, Right-click your device and choose Prepare. Choose similar options to the following:</p>

<p><img src="/blog/images/manage_device.png" alt="Manage device" /></p>

<p>Choose ‚ÄúDo not enroll in MDM‚Äù on the next screen. 
Choose (or make and choose) an organization. This is just an arbitrary name.</p>

<p>Choose to show all steps on the next screen:</p>

<p><img src="/blog/images/prepare.png" alt="Prepare" /></p>

<p>Click Prepare. It will likely tell you that you have to erase your phone to do this. Make a backup of your phone, if you have not already, and continue.</p>

<h1 id="create-the-enable-proxy-shortcut">Create the Enable Proxy Shortcut</h1>

<p>Now for the fun stuff. The easiest way to create the Enable Proxy shortcut would be to download and modify my version here: <a href="https://www.icloud.com/shortcuts/b3027ef26e6144e880c0d48593ad9cbf">Enable Charles Proxy Shortcut</a>.</p>

<p>The shortcut we‚Äôre trying to create is shown below on the right:</p>

<p><img src="/blog/images/shortcuts.png" alt="shortcuts" width="300px" /></p>

<p>Here are the steps in case you want to do it manually (This is all of them even though it‚Äôs slightly cut off):</p>

<p><img src="/blog/images/proxy-steps.jpg" alt="proxy steps" width="300px" /></p>

<p>Step one and step two of the above image open a link to a <a href="https://developer.apple.com/documentation/appstoreconnectapi/profiles">profile</a> that sets all of the proxy settings. To make these steps set your desired proxy settings, see Configure Proxy Profile below.</p>

<h2 id="configure-proxy-profile">Configure Proxy Profile</h2>

<p>For this to work, you need to make a <a href="https://developer.apple.com/documentation/appstoreconnectapi/profiles">profile</a> that configures the device‚Äôs proxy settings. The following is my profile file that configures my iPhone to use <a href="https://www.charlesproxy.com/">Charles Proxy</a> as my device‚Äôs proxy (which lets me snoop on my iPhone‚Äôs network traffic):</p>

<script src="https://gist.github.com/jmbeach/8a186134ccca23818e5b40d4f4f90247.js"></script>

<p>You should be able to leave pretty much everything the same and just change the settings you care about (such as ProxyServer). Afterwards, you can upload it to your own gist (or anywhere internet accessable) and replace the URL in step 1 with yours. The final step isn‚Äôt 100% necessary but I find it convneient. It opens the Profile settings page so you can quickly enable the newly downloaded profile. The separate shortcut is covered below.</p>

<h1 id="create-the-profile-settings-shortcut">Create the Profile Settings Shortcut</h1>

<p>The following shortcut opens the Profile settings page (which is somewhat hard to find) and streamlines enabling the newly downloaded profile and also removing it when you are done with it. Below is the only step in the shortcut. It can also be downloaded <a href="https://www.icloud.com/shortcuts/ed07e1c7d12f48e99977084ebb33c17d">here</a> for extra convenience.</p>

<p><img src="/blog/images/open-settings.jpg" alt="Open Settings" width="300px" /></p>

<p>The shortcut simply opens the URL <code class="language-plaintext highlighter-rouge">prefs:root=General&amp;path=ManagedConfigurationList</code> in safari which actually opens the preferences page.</p>

<h1 id="putting-it-all-together">Putting It All Together</h1>

<p>This is the same video from the start of the article, but let‚Äôs revisit it.</p>

<video src="https://jareds-dev-blog.s3.amazonaws.com/ios-profile-switcher.MP4" controls="" autoplay="" width="300px"></video>

<p>What‚Äôs happening is after you click the Enable Proxy shortcut, you‚Äôre taken to a page where you can download the profile. After clicking allow, you should manually go back to shortcuts, which will continue the shortcut automation and open the profile page. Here, you click Install, type in your password, and now you‚Äôre configured.</p>

<p>To stop using your proxy, you simply uninstall the profile, which once again, you can get easy access to using the Open Profile Settings Shortcut.</p>

<p>Like I said, it‚Äôs not perfect. There‚Äôs a decent number of steps here, but the main reason why I still like it is that I don‚Äôt have to remember anything. I‚Äôm just following clicks until my profile is enabled or disabled.</p>


  </div><a class="u-url" href="/blog/ios/iphone/proxy/2021/02/20/ios-proxy-switcher.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Jared Beach&#39;s Dev Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Jared Beach&#39;s Dev Blog</li><li><a class="u-email" href="mailto:jaredbeachdesign@gmail.com">jaredbeachdesign@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jmbeach"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jmbeach</span></a></li><li><a href="https://www.twitter.com/realjaredbeach"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">realjaredbeach</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Blog where I share solutions to niche problems I&#39;ve come up against and the challenging projects that are keeping me up at night.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
